var edit=1;$(document).ready(function(a){energia=0,carboidratos=0,proteinas=0,lipidios=0,fibras=0,vitamina_a=0,vitamina_c=0,vitamina_d=0,vitamina_e=0,vitamina_b1=0,vitamina_b2=0,vitamina_b6=0,vitamina_b12=0,niacina=0,folico=0,pantotenico=0,calcio=0,ferro=0,magnesio=0,potassio=0,selenio=0,fosforo=0,iodo=0,cobre=0,zinco=0,sodio=0,gordura_total=0,colesterol=0,gordura_saturada=0,gordura_poliinsaturada=0,gordura_monoinsaturada=0,valor=0,referencia_modalidade=[],removeClasse("#li_"+itens_cardapio[0].dia_semana,"disabled"),adicionaClasse("#li_"+itens_cardapio[0].dia_semana,"active"),adicionaClasse("#tab_"+itens_cardapio[0].dia_semana,"active"),adicionaAtributo("#a_"+itens_cardapio[0].dia_semana,"data-toggle","tab");for(var e=1;e<=6;e++)criaOpcaoRefeicoes(e);var i=moment(cardapio.data_inicio,"YYYY-MM-DD"),o=moment(cardapio.data_fim,"YYYY-MM-DD");for(var e in modalidades_escola)if(cardapio.id_modalidade==modalidades_escola[e].id)for(var r in referencias)modalidades_escola[e].id_referencia==referencias[r].id&&(referencia_modalidade=referencias[r]);a("#reservation").data("daterangepicker").setStartDate(i),a("#reservation").data("daterangepicker").setEndDate(o),oldData=a("#reservation").val().split(" - "),datai=moment(oldData[0],"DD/MM/YYYY"),dataf=moment(oldData[1],"DD/MM/YYYY"),oldDatai=moment(datai.format("YYYY-MM-DD"),"YYYY-MM-DD"),oldDataf=moment(dataf.format("YYYY-MM-DD"),"YYYY-MM-DD"),separa=a("#reservation").val().split(" - "),i=moment(separa[0],"DD/MM/YYYY"),o=moment(separa[1],"DD/MM/YYYY"),a("#fieldset_1").prop("disabled",!1),a("#fieldset_2").prop("disabled",!1),a("#fieldset_3").prop("disabled",!1),a("#fieldset_4").prop("disabled",!1),a("#fieldset_5").prop("disabled",!1),a("#fieldset_6").prop("disabled",!1),arr=i.format("YYYY-MM-DD"),arr2=o.format("YYYY-MM-DD"),partes=arr.match(/(\d+)/g),partes2=arr2.match(/(\d+)/g),d=new Date(partes[0],partes[1]-1,partes[2],(new Date).getHours(),(new Date).getMinutes(),(new Date).getSeconds(),(new Date).getMilliseconds()),d2=new Date(partes2[0],partes2[1]-1,partes2[2]),numero_dias=Math.abs(d2.getDay()-d.getDay())+1;var t="",s=itens_cardapio[0].dia_semana;for(var r in itens_cardapio){if(1==itens_cardapio[r].tipo)for(var e in itens)null!=itens.hasOwnProperty(e)&&itens[e].id==itens_cardapio[r].id_item&&(energia=parseFloat(energia.toFixed(3))+parseFloat((itens[e].calorias*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),carboidratos=parseFloat(carboidratos.toFixed(3))+parseFloat((itens[e].carboidratos*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),proteinas=parseFloat(proteinas.toFixed(3))+parseFloat((itens[e].proteinas*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),lipidios=parseFloat(lipidios.toFixed(3))+parseFloat((itens[e].lipidios*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),fibras=parseFloat(fibras.toFixed(3))+parseFloat((itens[e].fibras*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),vitamina_a=parseFloat(vitamina_a.toFixed(3))+parseFloat((itens[e].vitamina_a*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),vitamina_c=parseFloat(vitamina_c.toFixed(3))+parseFloat((itens[e].vitamina_c*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),vitamina_d=parseFloat(vitamina_d.toFixed(3))+parseFloat((itens[e].vitamina_d*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),vitamina_e=parseFloat(vitamina_e.toFixed(3))+parseFloat((itens[e].vitamina_e*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),vitamina_b1=parseFloat(vitamina_b1.toFixed(3))+parseFloat((itens[e].vitamina_b1*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),vitamina_b2=parseFloat(vitamina_b2.toFixed(3))+parseFloat((itens[e].vitamina_b2*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),vitamina_b6=parseFloat(vitamina_b6.toFixed(3))+parseFloat((itens[e].vitamina_b6*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),vitamina_b12=parseFloat(vitamina_b12.toFixed(3))+parseFloat((itens[e].vitamina_b12*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),niacina=parseFloat(niacina.toFixed(3))+parseFloat((itens[e].niacina*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),folico=parseFloat(folico.toFixed(3))+parseFloat((itens[e].folico*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),pantotenico=parseFloat(pantotenico.toFixed(3))+parseFloat((itens[e].pantotenico*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),calcio=parseFloat(calcio.toFixed(3))+parseFloat((itens[e].calcio*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),ferro=parseFloat(ferro.toFixed(3))+parseFloat((itens[e].ferro*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),magnesio=parseFloat(magnesio.toFixed(3))+parseFloat((itens[e].magnesio*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),potassio=parseFloat(potassio.toFixed(3))+parseFloat((itens[e].potassio*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),selenio=parseFloat(selenio.toFixed(3))+parseFloat((itens[e].selenio*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),fosforo=parseFloat(fosforo.toFixed(3))+parseFloat((itens[e].fosforo*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),iodo=parseFloat(iodo.toFixed(3))+parseFloat((itens[e].iodo*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),cobre=parseFloat(cobre.toFixed(3))+parseFloat((itens[e].cobre*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),zinco=parseFloat(zinco.toFixed(3))+parseFloat((itens[e].zinco*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),sodio=parseFloat(sodio.toFixed(3))+parseFloat((itens[e].sodio*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),gordura_total=parseFloat(gordura_total.toFixed(3))+parseFloat((itens[e].gordura_total*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),colesterol=parseFloat(colesterol.toFixed(3))+parseFloat((itens[e].colesterol*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),gordura_saturada=parseFloat(gordura_saturada.toFixed(3))+parseFloat((itens[e].gordura_saturada*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),gordura_poliinsaturada=parseFloat(gordura_poliinsaturada.toFixed(3))+parseFloat((itens[e].gordura_poliinsaturada*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),gordura_monoinsaturada=parseFloat(gordura_monoinsaturada.toFixed(3))+parseFloat((itens[e].gordura_monoinsaturada*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(3)),valor=parseFloat(valor.toFixed(2))+parseFloat((itens[e].valor*itens_cardapio[r].per_capta_alimento/itens[e].medida_base).toFixed(2)));var _=0,p=0,n=0,l=0,c=0,m=0,F=0,v=0,f=0,u=0,x=0,b=0,w=0,g=0,h=0,z=0,Y=0,T=0,R=0,D=0,y=0,q=0,M=0,C=0,O=0,E=0,P=0,I=0,V=0,S=0,k=0,A=0;if(2==itens_cardapio[r].tipo){var L=0;for(var e in view_preparacoes)null!=view_preparacoes.hasOwnProperty(e)&&view_preparacoes[e].id_preparacao==itens_cardapio[r].id_item&&(L=e,_=parseFloat(_.toFixed(3))+parseFloat((view_preparacoes[e].calorias*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),p=parseFloat(p.toFixed(3))+parseFloat((view_preparacoes[e].carboidratos*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),n=parseFloat(n.toFixed(3))+parseFloat((view_preparacoes[e].proteinas*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),l=parseFloat(l.toFixed(3))+parseFloat((view_preparacoes[e].lipidios*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),c=parseFloat(c.toFixed(3))+parseFloat((view_preparacoes[e].fibras*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),m=parseFloat(m.toFixed(3))+parseFloat((view_preparacoes[e].vitamina_a*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),F=parseFloat(F.toFixed(3))+parseFloat((view_preparacoes[e].vitamina_c*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),v=parseFloat(v.toFixed(3))+parseFloat((view_preparacoes[e].vitamina_d*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),f=parseFloat(f.toFixed(3))+parseFloat((view_preparacoes[e].vitamina_e*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),u=parseFloat(u.toFixed(3))+parseFloat((view_preparacoes[e].vitamina_b1*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),x=parseFloat(x.toFixed(3))+parseFloat((view_preparacoes[e].vitamina_b2*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),b=parseFloat(b.toFixed(3))+parseFloat((view_preparacoes[e].vitamina_b6*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),w=parseFloat(w.toFixed(3))+parseFloat((view_preparacoes[e].vitamina_b12*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),g=parseFloat(g.toFixed(3))+parseFloat((view_preparacoes[e].niacina*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),h=parseFloat(h.toFixed(3))+parseFloat((view_preparacoes[e].folico*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),z=parseFloat(z.toFixed(3))+parseFloat((view_preparacoes[e].pantotenico*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),Y=parseFloat(Y.toFixed(3))+parseFloat((view_preparacoes[e].calcio*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),T=parseFloat(T.toFixed(3))+parseFloat((view_preparacoes[e].ferro*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),R=parseFloat(R.toFixed(3))+parseFloat((view_preparacoes[e].magnesio*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),D=parseFloat(D.toFixed(3))+parseFloat((view_preparacoes[e].potassio*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),y=parseFloat(y.toFixed(3))+parseFloat((view_preparacoes[e].selenio*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),q=parseFloat(q.toFixed(3))+parseFloat((view_preparacoes[e].fosforo*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),M=parseFloat(M.toFixed(3))+parseFloat((view_preparacoes[e].iodo*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),C=parseFloat(C.toFixed(3))+parseFloat((view_preparacoes[e].cobre*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),O=parseFloat(O.toFixed(3))+parseFloat((view_preparacoes[e].zinco*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),E=parseFloat(E.toFixed(3))+parseFloat((view_preparacoes[e].sodio*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),P=parseFloat(P.toFixed(3))+parseFloat((view_preparacoes[e].gordura_total*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),I=parseFloat(I.toFixed(3))+parseFloat((view_preparacoes[e].colesterol*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),V=parseFloat(V.toFixed(3))+parseFloat((view_preparacoes[e].gordura_saturada*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),S=parseFloat(S.toFixed(3))+parseFloat((view_preparacoes[e].gordura_poliinsaturada*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),k=parseFloat(k.toFixed(3))+parseFloat((view_preparacoes[e].gordura_monoinsaturada*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(3)),A=parseFloat(A.toFixed(2))+parseFloat((view_preparacoes[e].valor*view_preparacoes[e].p_liquido/view_preparacoes[e].medida_base).toFixed(2)));energia=parseFloat(energia.toFixed(3))+parseFloat((_*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),carboidratos=parseFloat(carboidratos.toFixed(3))+parseFloat((p*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),proteinas=parseFloat(proteinas.toFixed(3))+parseFloat((n*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),lipidios=parseFloat(lipidios.toFixed(3))+parseFloat((l*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),fibras=parseFloat(fibras.toFixed(3))+parseFloat((c*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),vitamina_a=parseFloat(vitamina_a.toFixed(3))+parseFloat((m*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),vitamina_c=parseFloat(vitamina_c.toFixed(3))+parseFloat((F*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),vitamina_d=parseFloat(vitamina_d.toFixed(3))+parseFloat((v*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),vitamina_e=parseFloat(vitamina_e.toFixed(3))+parseFloat((f*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),vitamina_b1=parseFloat(vitamina_b1.toFixed(3))+parseFloat((u*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),vitamina_b2=parseFloat(vitamina_b2.toFixed(3))+parseFloat((x*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),vitamina_b6=parseFloat(vitamina_b6.toFixed(3))+parseFloat((b*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),vitamina_b12=parseFloat(vitamina_b12.toFixed(3))+parseFloat((w*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),niacina=parseFloat(niacina.toFixed(3))+parseFloat((g*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),folico=parseFloat(folico.toFixed(3))+parseFloat((h*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),pantotenico=parseFloat(pantotenico.toFixed(3))+parseFloat((z*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),calcio=parseFloat(calcio.toFixed(3))+parseFloat((Y*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),ferro=parseFloat(ferro.toFixed(3))+parseFloat((T*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),magnesio=parseFloat(magnesio.toFixed(3))+parseFloat((R*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),potassio=parseFloat(potassio.toFixed(3))+parseFloat((D*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),selenio=parseFloat(selenio.toFixed(3))+parseFloat((y*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),fosforo=parseFloat(fosforo.toFixed(3))+parseFloat((q*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),iodo=parseFloat(iodo.toFixed(3))+parseFloat((M*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),cobre=parseFloat(cobre.toFixed(3))+parseFloat((C*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),zinco=parseFloat(zinco.toFixed(3))+parseFloat((O*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),sodio=parseFloat(sodio.toFixed(3))+parseFloat((E*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),gordura_total=parseFloat(gordura_total.toFixed(3))+parseFloat((P*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),colesterol=parseFloat(colesterol.toFixed(3))+parseFloat((I*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),gordura_saturada=parseFloat(gordura_saturada.toFixed(3))+parseFloat((V*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),gordura_poliinsaturada=parseFloat(gordura_poliinsaturada.toFixed(3))+parseFloat((S*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),gordura_monoinsaturada=parseFloat(gordura_monoinsaturada.toFixed(3))+parseFloat((k*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(3)),valor=parseFloat(valor.toFixed(2))+parseFloat((A*itens_cardapio[r].per_capta_alimento/view_preparacoes[L].medida_total).toFixed(2))}for(var e in itens_cardapio.length>1&&e>0&&itens_cardapio[r].dia_semana!=itens_cardapio[0].dia_semana&&itens_cardapio[r].dia_semana!=s&&(removeClasse("#li_"+itens_cardapio[r].dia_semana,"disabled"),removeClasse("#li_"+itens_cardapio[r].dia_semana,"active"),adicionaAtributo("#a_"+itens_cardapio[r].dia_semana,"data-toggle","tab"),s=itens_cardapio[r].dia_semana),tipo_refeicoes)tipo_refeicoes[e].id==itens_cardapio[r].id_refeicao&&(horario=tipo_refeicoes[e].horario.split(":"),t=60*horario[0]+horario[1]);var j="";j=itens_cardapio[r].id_unidade_medida>=1?"g":"";var J='<div class="listaItem'+itens_cardapio[r].dia_semana+'" horario_ref="'+t+'"><li class="panel label-azul"><div class="row"><var class="idRefeicao'+itens_cardapio[r].dia_semana+'" style="display: none">'+itens_cardapio[r].id_refeicao+'</var><var class="idTipoItem'+itens_cardapio[r].dia_semana+'" style="display: none">'+itens_cardapio[r].tipo+'</var><var class="idItem'+itens_cardapio[r].dia_semana+'" style="display: none">'+itens_cardapio[r].id_item+'</var><var class="diaSemana'+itens_cardapio[r].dia_semana+'" style="display: none">'+itens_cardapio[r].dia_semana+'</var><var class="idMedida'+itens_cardapio[r].dia_semana+'" style="display: none">'+itens_cardapio[r].id_unidade_medida+'</var><var class="perCapta'+itens_cardapio[r].dia_semana+'" style="display: none">'+itens_cardapio[r].per_capta_alimento+'</var><div class="col-md-3 wrapper refeicao'+itens_cardapio[r].dia_semana+'" style="margin-top: 5px">'+itens_cardapio[r].nome_refeicao+'</div><div class="col-md-5 wrapper item'+itens_cardapio[r].dia_semana+'" style="margin-top: 5px">'+itens_cardapio[r].nome_item+'</div><div class="col-md-2 wrapper medida'+itens_cardapio[r].dia_semana+'" style="margin-top: 5px">'+itens_cardapio[r].per_capta_alimento+" "+j+'</div><div class="col-md-1 text-center"><a class="btn btn-default botaoEditar'+itens_cardapio[r].dia_semana+'" data-toggle="modal" data-target="#editar_item"><i class="fa fa-edit"></i></a></div><div class="col-md-1 text-center"><button class="btn btn-danger botaoRemover'+itens_cardapio[r].dia_semana+' data-toggle="tooltip" data-placement="top" title="Excluir"><i class="fa fa-trash"></i></button></div></div></li></div>';a("#listaVazia"+itens_cardapio[r].dia_semana).hide(),a("#listaItens"+itens_cardapio[r].dia_semana).append(J),ordenaRefeicoes(".listaItem"+itens_cardapio[r].dia_semana,"#listaItens"+itens_cardapio[r].dia_semana),criaOpcaoRefeicoes(itens_cardapio[r].dia_semana),listaTamanhoTotal++,1==itens_cardapio[r].dia_semana?(listaTamanho1++,listaVazia1=!1):2==itens_cardapio[r].dia_semana?(listaTamanho2++,listaVazia2=!1):3==itens_cardapio[r].dia_semana?(listaTamanho3++,listaVazia3=!1):4==itens_cardapio[r].dia_semana?(listaTamanho4++,listaVazia4=!1):5==itens_cardapio[r].dia_semana?(listaTamanho5++,listaVazia5=!1):(listaTamanho6++,listaVazia6=!1)}a("#nome_referencia").empty(),a("#nome_referencia").html(referencia_modalidade.nome),a("#descricao_referencia").empty(),a("#descricao_referencia").html(referencia_modalidade.descricao),a("#categoria_referencia").empty(),a("#idade_referencia").empty(),1==referencia_modalidade.categoria_ensino?(a("#categoria_referencia").html("Creche"),1==referencia_modalidade.idade_alunos?a("#idade_referencia").html("7 - 11 meses"):a("#idade_referencia").html("1 - 3 anos")):2==referencia_modalidade.categoria_ensino?(a("#categoria_referencia").html("Pré-escola"),a("#idade_referencia").html("4 - 5 anos")):3==referencia_modalidade.categoria_ensino?(a("#categoria_referencia").html("Ensino Fundamental"),4==referencia_modalidade.idade_alunos?a("#idade_referencia").html("6 - 10 anos"):a("#idade_referencia").html("11 - 15 anos")):4==referencia_modalidade.categoria_ensino?(a("#categoria_referencia").html("Ensino Médio"),a("#idade_referencia").html("16 - 18 anos")):(a("#categoria_referencia").html("EJA"),7==referencia_modalidade.idade_alunos?a("#idade_referencia").html("19 - 30 anos"):a("#idade_referencia").html("31 - 60 anos")),a("#calorias_ref").val(referencia_modalidade.calorias),a("#carboidratos_ref").val(referencia_modalidade.carboidratos),a("#proteinas_ref").val(referencia_modalidade.proteinas),a("#lipidios_ref").val(referencia_modalidade.lipidios),a("#fibras_ref").val(referencia_modalidade.fibras),a("#vitamina_a_ref").val(referencia_modalidade.vitamina_a),a("#vitamina_c_ref").val(referencia_modalidade.vitamina_c),a("#vitamina_d_ref").val(referencia_modalidade.vitamina_d),a("#vitamina_e_ref").val(referencia_modalidade.vitamina_e),a("#vitamina_b1_ref").val(referencia_modalidade.vitamina_b1),a("#vitamina_b2_ref").val(referencia_modalidade.vitamina_b2),a("#vitamina_b6_ref").val(referencia_modalidade.vitamina_b6),a("#vitamina_b12_ref").val(referencia_modalidade.vitamina_b12),a("#niacina_ref").val(referencia_modalidade.niacina),a("#folico_ref").val(referencia_modalidade.folico),a("#pantotenico_ref").val(referencia_modalidade.pantotenico),a("#calcio_ref").val(referencia_modalidade.calcio),a("#ferro_ref").val(referencia_modalidade.ferro),a("#magnesio_ref").val(referencia_modalidade.magnesio),a("#potassio_ref").val(referencia_modalidade.potassio),a("#selenio_ref").val(referencia_modalidade.selenio),a("#fosforo_ref").val(referencia_modalidade.fosforo),a("#iodo_ref").val(referencia_modalidade.iodo),a("#cobre_ref").val(referencia_modalidade.cobre),a("#zinco_ref").val(referencia_modalidade.zinco),a("#sodio_ref").val(referencia_modalidade.sodio),a("#gordura_total_ref").val(referencia_modalidade.gordura_total),a("#colesterol_ref").val(referencia_modalidade.colesterol),a("#gordura_saturada_ref").val(referencia_modalidade.gordura_saturada),a("#gordura_poliinsaturada_ref").val(referencia_modalidade.gordura_poliinsaturada),a("#gordura_monoinsaturada_ref").val(referencia_modalidade.gordura_monoinsaturada),atualizaTabelaReferencia(energia/numero_dias,referencia_modalidade.calorias,"#span_p_calorias"),atualizaTabelaReferencia(carboidratos/numero_dias,referencia_modalidade.carboidratos,"#span_p_carboidratos"),atualizaTabelaReferencia(proteinas/numero_dias,referencia_modalidade.proteinas,"#span_p_proteinas"),atualizaTabelaReferencia(lipidios/numero_dias,referencia_modalidade.lipidios,"#span_p_lipidios"),atualizaTabelaReferencia(fibras/numero_dias,referencia_modalidade.fibras,"#span_p_fibras"),atualizaTabelaReferencia(vitamina_a/numero_dias,referencia_modalidade.vitamina_a,"#span_p_vit_a"),atualizaTabelaReferencia(vitamina_c/numero_dias,referencia_modalidade.vitamina_c,"#span_p_vit_c"),atualizaTabelaReferencia(vitamina_d/numero_dias,referencia_modalidade.vitamina_d,"#span_p_vit_d"),atualizaTabelaReferencia(vitamina_e/numero_dias,referencia_modalidade.vitamina_e,"#span_p_vit_e"),atualizaTabelaReferencia(vitamina_b1/numero_dias,referencia_modalidade.vitamina_b1,"#span_p_vit_b1"),atualizaTabelaReferencia(vitamina_b2/numero_dias,referencia_modalidade.vitamina_b2,"#span_p_vit_b2"),atualizaTabelaReferencia(vitamina_b6/numero_dias,referencia_modalidade.vitamina_b6,"#span_p_vit_b6"),atualizaTabelaReferencia(vitamina_b12/numero_dias,referencia_modalidade.vitamina_b12,"#span_p_vit_b12"),atualizaTabelaReferencia(niacina/numero_dias,referencia_modalidade.niacina,"#span_p_niacina"),atualizaTabelaReferencia(folico/numero_dias,referencia_modalidade.folico,"#span_p_folico"),atualizaTabelaReferencia(pantotenico/numero_dias,referencia_modalidade.pantotenico,"#span_p_pantotenico"),atualizaTabelaReferencia(calcio/numero_dias,referencia_modalidade.calcio,"#span_p_calcio"),atualizaTabelaReferencia(ferro/numero_dias,referencia_modalidade.ferro,"#span_p_ferro"),atualizaTabelaReferencia(magnesio/numero_dias,referencia_modalidade.magnesio,"#span_p_magnesio"),atualizaTabelaReferencia(potassio/numero_dias,referencia_modalidade.potassio,"#span_p_potassio"),atualizaTabelaReferencia(selenio/numero_dias,referencia_modalidade.selenio,"#span_p_selenio"),atualizaTabelaReferencia(fosforo/numero_dias,referencia_modalidade.fosforo,"#span_p_fosforo"),atualizaTabelaReferencia(iodo/numero_dias,referencia_modalidade.iodo,"#span_p_iodo"),atualizaTabelaReferencia(cobre/numero_dias,referencia_modalidade.cobre,"#span_p_cobre"),atualizaTabelaReferencia(zinco/numero_dias,referencia_modalidade.zinco,"#span_p_zinco"),atualizaTabelaReferencia(sodio/numero_dias,referencia_modalidade.sodio,"#span_p_sodio"),atualizaTabelaReferencia(gordura_total/numero_dias,referencia_modalidade.gordura_total,"#span_p_g_total"),atualizaTabelaReferencia(colesterol/numero_dias,referencia_modalidade.colesterol,"#span_p_colesterol"),atualizaTabelaReferencia(gordura_saturada/numero_dias,referencia_modalidade.gordura_saturada,"#span_p_g_saturada"),atualizaTabelaReferencia(gordura_poliinsaturada/numero_dias,referencia_modalidade.gordura_poliinsaturada,"#span_p_g_poliinsaturada"),atualizaTabelaReferencia(gordura_monoinsaturada/numero_dias,referencia_modalidade.gordura_monoinsaturada,"#span_p_g_monoinsaturada"),a("#calorias").val(parseFloat(energia/numero_dias).toFixed(3)),a("#carboidratos").val(parseFloat(carboidratos/numero_dias).toFixed(3)),a("#proteinas").val(parseFloat(proteinas/numero_dias).toFixed(3)),a("#lipidios").val(parseFloat(lipidios/numero_dias).toFixed(3)),a("#fibras").val(parseFloat(fibras/numero_dias).toFixed(3)),a("#vitamina_a").val(parseFloat(vitamina_a/numero_dias).toFixed(3)),a("#vitamina_c").val(parseFloat(vitamina_c/numero_dias).toFixed(3)),a("#vitamina_d").val(parseFloat(vitamina_d/numero_dias/numero_dias).toFixed(3)),a("#vitamina_e").val(parseFloat(vitamina_e/numero_dias).toFixed(3)),a("#vitamina_b1").val(parseFloat(vitamina_b1/numero_dias).toFixed(3)),a("#vitamina_b2").val(parseFloat(vitamina_b2/numero_dias).toFixed(3)),a("#vitamina_b6").val(parseFloat(vitamina_b6/numero_dias).toFixed(3)),a("#vitamina_b12").val(parseFloat(vitamina_b12/numero_dias).toFixed(3)),a("#niacina").val(parseFloat(niacina/numero_dias).toFixed(3)),a("#folico").val(parseFloat(folico/numero_dias).toFixed(3)),a("#pantotenico").val(parseFloat(pantotenico/numero_dias).toFixed(3)),a("#calcio").val(parseFloat(calcio/numero_dias).toFixed(3)),a("#ferro").val(parseFloat(ferro/numero_dias).toFixed(3)),a("#magnesio").val(parseFloat(magnesio/numero_dias).toFixed(3)),a("#potassio").val(parseFloat(potassio/numero_dias).toFixed(3)),a("#selenio").val(parseFloat(selenio/numero_dias).toFixed(3)),a("#fosforo").val(parseFloat(fosforo/numero_dias).toFixed(3)),a("#iodo").val(parseFloat(iodo/numero_dias).toFixed(3)),a("#cobre").val(parseFloat(cobre/numero_dias).toFixed(3)),a("#zinco").val(parseFloat(zinco/numero_dias).toFixed(3)),a("#sodio").val(parseFloat(sodio/numero_dias).toFixed(3)),a("#gordura_total").val(parseFloat(gordura_total/numero_dias).toFixed(3)),a("#colesterol").val(parseFloat(colesterol/numero_dias).toFixed(3)),a("#gordura_saturada").val(parseFloat(gordura_saturada/numero_dias).toFixed(3)),a("#gordura_poliinsaturada").val(parseFloat(gordura_poliinsaturada/numero_dias).toFixed(3)),a("#gordura_monoinsaturada").val(parseFloat(gordura_monoinsaturada/numero_dias).toFixed(3)),a("#valor").val(parseFloat(valor).toFixed(2)),adicionaLinhaTabela(),a("#confBotaoEnviarUpdate").click(function(){if(!validaEnviarFormulario()){for(var e=0,i=1;i<=6;i++)validaListaVazia(i)&&(e=1);0==e&&(a(this).addClass("disabled"),a(this).text("Enviando..."),function(){for(var e=a("#nome").val(),i=a("#descricao").val(),o=a("#select_modalidade option:selected").val(),r=a("#select_escola option:selected").val(),t=(a("#reservation").val(),a("#valor").val()),d=cardapio.id,s=[],_=0,p=0,n=0,l=0,c=0,m=0,F=1;F<=6;F++)a("#li_"+F).hasClass("disabled")||validaListaVazia(F)||(a('var[class="idRefeicao'+F+'"]').each(function(p,n){s.hasOwnProperty(_)||(s[_]={nome:e,descricao:i,modalidade:o,escola:r,data_inicio:arr,data_fim:arr2,numero_dias:numero_dias,valor:t,id_cardapio:d}),s[_].idRefeicao=a(this).html(),_++}),a('var[class="diaSemana'+F+'"]').each(function(_,n){s.hasOwnProperty(p)||(s[p]={nome:e,descricao:i,modalidade:o,escola:r,data_inicio:arr,data_fim:arr2,numero_dias:numero_dias,valor:t,id_cardapio:d}),s[p].diaSemana=a(this).html(),p++}),a('var[class="idTipoItem'+F+'"]').each(function(_,p){s.hasOwnProperty(n)||(s[n]={nome:e,descricao:i,modalidade:o,escola:r,data_inicio:arr,data_fim:arr2,numero_dias:numero_dias,valor:t,id_cardapio:d}),s[n].idTipoItem=a(this).html(),n++}),a('var[class="idItem'+F+'"]').each(function(_,p){s.hasOwnProperty(l)||(s[l]={nome:e,descricao:i,modalidade:o,escola:r,data_inicio:arr,data_fim:arr2,numero_dias:numero_dias,valor:t,id_cardapio:d}),s[l].idItem=a(this).html(),l++}),a('var[class="idMedida'+F+'"]').each(function(_,p){s.hasOwnProperty(c)||(s[c]={nome:e,descricao:i,modalidade:o,escola:r,data_inicio:arr,data_fim:arr2,numero_dias:numero_dias,valor:t,id_cardapio:d}),s[c].idMedida=a(this).html(),c++}),a('var[class="perCapta'+F+'"]').each(function(_,p){s.hasOwnProperty(m)||(s[m]={nome:e,descricao:i,modalidade:o,escola:r,data_inicio:arr,data_fim:arr2,numero_dias:numero_dias,valor:t,id_cardapio:d}),s[m].perCapta=a(this).html(),m++}));a.ajaxSetup({headers:{"X-CSRF-TOKEN":a('meta[name="csrf-token"]').attr("content")}}),a.ajax({url:"/menu/update",type:"post",dataType:"text",data:{testdata:JSON.stringify(s)},success:function(a,e){location.href=APP_URL+"/menu/show"},error:function(a,e,i){alert("Erro")}})}())}})});
