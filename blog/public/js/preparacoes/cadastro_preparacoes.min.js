var energia=0,carboidratos=0,proteinas=0,lipidios=0,fibras=0,vitamina_a=0,vitamina_c=0,vitamina_d=0,vitamina_e=0,vitamina_b1=0,vitamina_b2=0,vitamina_b6=0,vitamina_b12=0,niacina=0,folico=0,pantotenico=0,calcio=0,ferro=0,magnesio=0,potassio=0,selenio=0,fosforo=0,iodo=0,cobre=0,zinco=0,sodio=0,gordura_total=0,colesterol=0,gordura_saturada=0,gordura_poliinsaturada=0,gordura_monoinsaturada=0,valor=0,medida_total=0,editando=!1,posicaoEditar=0,listaVazia=!0,listaTamanho=0;function mostraDialogo3(a,e){swal({title:"Aviso!",text:a,icon:e}).then(a=>{location.href=APP_URL+"/preparation/create"})}function mostraDialogo4(a){swal("Deseja gerar o PDF da preparação agora?",{buttons:{cancel:"Cancelar",catch:{text:"Confirmar",value:"catch"},defeat:!1}}).then(e=>{switch(e){case"catch":window.open(APP_URL+"/preparation/"+a+"/pdf","_blank"),mostraDialogo3("Dados inseridos com sucesso","success");break;default:mostraDialogo3("Dados inseridos com sucesso","success")}})}function criaOpcaoItens(a){var e=$("#select_item"),t='<option value="0">Selecione uma opção</option>';if("undefined"!=typeof itens)if(a>0)for(var i in itens)for(var o in fontes)null!=itens.hasOwnProperty(i)&&itens[i].id_fonte==a&&itens[i].id_fonte==fontes[o].id&&(t+='<option value="'+itens[i].id+'">'+itens[i].nome+"</option>");else for(var i in itens)for(var o in fontes)itens[i].id_fonte==fontes[o].id&&(t+='<option value="'+itens[i].id+'">'+itens[i].nome+"</option>");else mostraDialogo("<strong>Por favor, primeiro cadastre um Alimento.</strong>","info",4e3,"info");e.empty(),e.html(t),$("#select_item").selectpicker("refresh")}function criaOpcaoItensEdit(a){var e=$("#select_item_edit"),t='<option value="0">Selecione uma opção</option>';if("undefined"!=typeof itens)if(a>0)for(var i in itens)for(var o in fontes)null!=itens.hasOwnProperty(i)&&itens[i].id_fonte==a&&itens[i].id_fonte==fontes[o].id&&(t+='<option value="'+itens[i].id+'">'+itens[i].nome+" ("+fontes[o].nome+")</option>");else for(var i in itens)for(var o in fontes)itens[i].id_fonte==fontes[o].id&&(t+='<option value="'+itens[i].id+'">'+itens[i].nome+" ("+fontes[o].nome+")</option>");else mostraDialogo("<strong>Por favor, primeiro cadastre um Alimento.</strong>","info",4e3,"info");e.empty(),e.html(t),$("#select_item_edit").selectpicker("refresh")}function criaOpcaoMedidas(a){var e=$("#select_medida");e.empty();var t='<option value="0">Selecione uma opção</option>';"undefined"!=typeof itens&&null!=itens.hasOwnProperty(a)?t+='<option value="1">g</option>':mostraDialogo("<strong>Por favor, primeiro cadastre um Alimento.</strong>","info",4e3,"info"),e.empty(),e.html(t)}function criaOpcaoMedidasEdit(a){var e=$("#select_medida_edit");e.empty();var t='<option value="0">Selecione uma opção</option>';"undefined"!=typeof itens&&null!=itens.hasOwnProperty(a)?t+='<option value="1">g</option>':mostraDialogo("<strong>Por favor, primeiro cadastre um Alimento.</strong>","info",4e3,"info"),e.empty(),e.html(t)}function validaEnviarFormulario(){var a=!1,e=$("#nome"),t=$("#select_tipo_preparacao"),i=$("#modo_preparo"),o=$("#r_total");return""==e.val()?(a=!0,notificacao_alerta("Digite um <b>Nome</b>.")):t.val()<=0?(a=!0,notificacao_alerta("Selecine um <b>Tipo de Preparação</b>.")):o.val()<=0?(a=!0,notificacao_alerta("Insira <b>o Rendimento total da Preparação</b>.")):""==i.val()?(a=!0,notificacao_alerta("Digite o <b>Modo de Preparo</b>.")):a=!1,a}function validaListaVazia(){var a=!1;return 0==listaTamanho&&(notificacao_alerta("A lista de Ingredientes está <b>Vazia</b>."),a=!0),a}function adicionaLinhaTabela(){$("#table_preparacao tbody tr").remove();var a=[],e=[],t=[],i=[],o=[],s=[],d=[],l=[],r=[],n=[],p=[],F=[],_=[],c=[],m=[],v=[],x=[],b=[],u=[],f=[];$('var[class="idItem"]').each(function(a,e){s[a]=$(this).html()}),$('var[class="idMedida"]').each(function(a,e){d[a]=$(this).html()}),$('var[class="valorPL"]').each(function(a,e){t[a]=$(this).html()}),$(".item").each(function(e,t){a[e]=$(this).html()}),$(".pb").each(function(a,t){e[a]=$(this).html()}),$(".pl").each(function(a,e){i[a]=$(this).html()}),$(".fc").each(function(a,e){o[a]=$(this).html()});for(var h=0;h<a.length;h++)for(var g in itens)null!=itens.hasOwnProperty(g)&&itens[g].id==s[h]&&(r[h]=itens[g].calorias*t[h]/itens[g].medida_base,n[h]=itens[g].carboidratos*t[h]/itens[g].medida_base,p[h]=itens[g].proteinas*t[h]/itens[g].medida_base,F[h]=itens[g].lipidios*t[h]/itens[g].medida_base,_[h]=itens[g].fibras*t[h]/itens[g].medida_base,c[h]=itens[g].vitamina_a*t[h]/itens[g].medida_base,m[h]=itens[g].vitamina_c*t[h]/itens[g].medida_base,v[h]=itens[g].calcio*t[h]/itens[g].medida_base,x[h]=itens[g].ferro*t[h]/itens[g].medida_base,b[h]=itens[g].magnesio*t[h]/itens[g].medida_base,u[h]=itens[g].zinco*t[h]/itens[g].medida_base,f[h]=itens[g].sodio*t[h]/itens[g].medida_base,l[h]=itens[g].valor*t[h]/itens[g].medida_base);for($("#nome").val(),$("#modo_preparo").val(),g=0;g<a.length;g++){var y=$("<tr class='success'>"),w="",z=e[g].split(" "),P=i[g].split(" ");w+='<td class="text-center"style="width:100px;" colspan="1"><font size=2>'+a[g]+"</td>",w+='<td class="text-center"style="width:100px;" colspan="1"><font size=1>'+parseFloat(z[0]).toFixed(3)+"</font></td>",w+='<td class="text-center"style="width:100px;" colspan="1"><font size=1>'+parseFloat(P[0]).toFixed(3)+"</font></td>",w+='<td class="text-center"style="width:100px;" colspan="1"><font size=1>'+parseFloat(o[g]).toFixed(3)+"</font></td>",w+='<td class="text-center"style="width:100px;" colspan="1"><font size=1>R$ '+parseFloat(l[g]).toFixed(2)+"</font></td>",w+='<td class="text-center"style="width:100px;" colspan="1"><font size=1>'+parseFloat(r[g]).toFixed(3)+"</font></td>",w+='<td class="text-center"style="width:100px;" colspan="1"><font size=1>'+parseFloat(n[g]).toFixed(3)+"</font></td>",w+='<td class="text-center"style="width:100px;" colspan="1"><font size=1>'+parseFloat(p[g]).toFixed(3)+"</font></td>",w+='<td class="text-center"style="width:100px;" colspan="1"><font size=1>'+parseFloat(F[g]).toFixed(3)+"</font></td>",w+='<td class="text-center"style="width:100px;" colspan="1"><font size=1>'+parseFloat(_[g]).toFixed(3)+"</font></td>",w+='<td class="text-center"style="width:100px;" colspan="1"><font size=1>'+parseFloat(c[g]).toFixed(3)+"</font></td>",w+='<td class="text-center"style="width:100px;" colspan="1"><font size=1>'+parseFloat(m[g]).toFixed(3)+"</font></td>",w+='<td class="text-center"style="width:100px;" colspan="1"><font size=1>'+parseFloat(v[g]).toFixed(3)+"</font></td>",w+='<td class="text-center"style="width:100px;" colspan="1"><font size=1>'+parseFloat(x[g]).toFixed(3)+"</font></td>",w+='<td class="text-center"style="width:100px;" colspan="1"><font size=1>'+parseFloat(b[g]).toFixed(3)+"</font></td>",w+='<td class="text-center"style="width:100px;" colspan="1"><font size=1>'+parseFloat(u[g]).toFixed(3)+"</font></td>",w+='<td class="text-center"style="width:100px;" colspan="1"><font size=1>'+parseFloat(f[g]).toFixed(3)+"</font></td>",y.append(w),$("#table_preparacao").append(y)}$("#td_span_valor").html(valor.toFixed(2)),$("#td_span_calorias").html(energia.toFixed(3)),$("#td_span_carboidratos").html(carboidratos.toFixed(3)),$("#td_span_proteinas").html(proteinas.toFixed(3)),$("#td_span_lipidios").html(lipidios.toFixed(3)),$("#td_span_fibras").html(fibras.toFixed(3)),$("#td_span_vit_a").html(vitamina_a.toFixed(3)),$("#td_span_vit_c").html(vitamina_c.toFixed(3)),$("#td_span_calcio").html(calcio.toFixed(3)),$("#td_span_ferro").html(ferro.toFixed(3)),$("#td_span_magnesio").html(magnesio.toFixed(3)),$("#td_span_zinco").html(zinco.toFixed(3)),$("#td_span_sodio").html(sodio.toFixed(3)),$("#span_modo_preparo").html($("#modo_preparo").val()),$("#span_nome_preparacao").html($("#nome").val())}$(document).ready(function(a){function e(){a("#select_fonte").val(0),criaOpcaoItens(0),a("#select_medida").empty(),a("#select_medida").append('<option value="0" option:selected>Selecione uma opção</option>'),a("#p_bruto").val(parseFloat(0).toFixed(3)),a("#p_liquido").val(parseFloat(0).toFixed(3)),a("#f_correcao").val(parseFloat(0).toFixed(3)),a("#p_bruto").prop("disabled",!0),a("#p_liquido").prop("disabled",!0)}function t(){var e,i;(e=a(".botaoRemover")).off(),e.each(function(e,i){a(i).click(function(){var i=a(a(".idItem")[e]),o=a(a(".valorPL")[e]);for(var s in a(a(".idMedida")[e]),a(a(".listaItem")[e]).remove(),a(a(".label-azul")[e]).remove(),0==--listaTamanho&&(a("#listaVazia").show(),listaVazia=!0),itens)null!=itens.hasOwnProperty(s)&&itens[s].id==i.html()&&(energia=parseFloat(energia.toFixed(3))-parseFloat((itens[s].calorias*o.html()/itens[s].medida_base).toFixed(3)),carboidratos=parseFloat(carboidratos.toFixed(3))-parseFloat((itens[s].carboidratos*o.html()/itens[s].medida_base).toFixed(3)),proteinas=parseFloat(proteinas.toFixed(3))-parseFloat((itens[s].proteinas*o.html()/itens[s].medida_base).toFixed(3)),lipidios=parseFloat(lipidios.toFixed(3))-parseFloat((itens[s].lipidios*o.html()/itens[s].medida_base).toFixed(3)),fibras=parseFloat(fibras.toFixed(3))-parseFloat((itens[s].fibras*o.html()/itens[s].medida_base).toFixed(3)),vitamina_a=parseFloat(vitamina_a.toFixed(3))-parseFloat((itens[s].vitamina_a*o.html()/itens[s].medida_base).toFixed(3)),vitamina_c=parseFloat(vitamina_c.toFixed(3))-parseFloat((itens[s].vitamina_c*o.html()/itens[s].medida_base).toFixed(3)),vitamina_d=parseFloat(vitamina_d.toFixed(3))-parseFloat((itens[s].vitamina_d*o.html()/itens[s].medida_base).toFixed(3)),vitamina_e=parseFloat(vitamina_e.toFixed(3))-parseFloat((itens[s].vitamina_e*o.html()/itens[s].medida_base).toFixed(3)),vitamina_b1=parseFloat(vitamina_b1.toFixed(3))-parseFloat((itens[s].vitamina_b1*o.html()/itens[s].medida_base).toFixed(3)),vitamina_b2=parseFloat(vitamina_b2.toFixed(3))-parseFloat((itens[s].vitamina_b2*o.html()/itens[s].medida_base).toFixed(3)),vitamina_b6=parseFloat(vitamina_b6.toFixed(3))-parseFloat((itens[s].vitamina_b6*o.html()/itens[s].medida_base).toFixed(3)),vitamina_b12=parseFloat(vitamina_b12.toFixed(3))-parseFloat((itens[s].vitamina_b12*o.html()/itens[s].medida_base).toFixed(3)),niacina=parseFloat(niacina.toFixed(3))-parseFloat((itens[s].niacina*o.html()/itens[s].medida_base).toFixed(3)),folico=parseFloat(folico.toFixed(3))-parseFloat((itens[s].folico*o.html()/itens[s].medida_base).toFixed(3)),pantotenico=parseFloat(pantotenico.toFixed(3))-parseFloat((itens[s].pantotenico*o.html()/itens[s].medida_base).toFixed(3)),calcio=parseFloat(calcio.toFixed(3))-parseFloat((itens[s].calcio*o.html()/itens[s].medida_base).toFixed(3)),ferro=parseFloat(ferro.toFixed(3))-parseFloat((itens[s].ferro*o.html()/itens[s].medida_base).toFixed(3)),magnesio=parseFloat(magnesio.toFixed(3))-parseFloat((itens[s].magnesio*o.html()/itens[s].medida_base).toFixed(3)),potassio=parseFloat(potassio.toFixed(3))-parseFloat((itens[s].potassio*o.html()/itens[s].medida_base).toFixed(3)),selenio=parseFloat(selenio.toFixed(3))-parseFloat((itens[s].selenio*o.html()/itens[s].medida_base).toFixed(3)),fosforo=parseFloat(fosforo.toFixed(3))-parseFloat((itens[s].fosforo*o.html()/itens[s].medida_base).toFixed(3)),iodo=parseFloat(iodo.toFixed(3))-parseFloat((itens[s].iodo*o.html()/itens[s].medida_base).toFixed(3)),cobre=parseFloat(cobre.toFixed(3))-parseFloat((itens[s].cobre*o.html()/itens[s].medida_base).toFixed(3)),zinco=parseFloat(zinco.toFixed(3))-parseFloat((itens[s].zinco*o.html()/itens[s].medida_base).toFixed(3)),sodio=parseFloat(sodio.toFixed(3))-parseFloat((itens[s].sodio*o.html()/itens[s].medida_base).toFixed(3)),gordura_total=parseFloat(gordura_total.toFixed(3))-parseFloat((itens[s].gordura_total*o.html()/itens[s].medida_base).toFixed(3)),colesterol=parseFloat(colesterol.toFixed(3))-parseFloat((itens[s].colesterol*o.html()/itens[s].medida_base).toFixed(3)),gordura_saturada=parseFloat(gordura_saturada.toFixed(3))-parseFloat((itens[s].gordura_saturada*o.html()/itens[s].medida_base).toFixed(3)),gordura_poliinsaturada=parseFloat(gordura_poliinsaturada.toFixed(3))-parseFloat((itens[s].gordura_poliinsaturada*o.html()/itens[s].medida_base).toFixed(3)),gordura_monoinsaturada=parseFloat(gordura_monoinsaturada.toFixed(3))-parseFloat((itens[s].gordura_monoinsaturada*o.html()/itens[s].medida_base).toFixed(3)),medida_total=parseFloat(medida_total)-parseFloat(o.html()),valor=parseFloat(valor.toFixed(2))-parseFloat((itens[s].valor*o.html()/itens[s].medida_base).toFixed(2)));a("#calorias").val(parseFloat(energia).toFixed(3)),a("#carboidratos").val(parseFloat(carboidratos).toFixed(3)),a("#proteinas").val(parseFloat(proteinas).toFixed(3)),a("#lipidios").val(parseFloat(lipidios).toFixed(3)),a("#fibras").val(parseFloat(fibras).toFixed(3)),a("#vitamina_a").val(parseFloat(vitamina_a).toFixed(3)),a("#vitamina_c").val(parseFloat(vitamina_c).toFixed(3)),a("#vitamina_d").val(parseFloat(vitamina_d).toFixed(3)),a("#vitamina_e").val(parseFloat(vitamina_e).toFixed(3)),a("#vitamina_b1").val(parseFloat(vitamina_b1).toFixed(3)),a("#vitamina_b2").val(parseFloat(vitamina_b2).toFixed(3)),a("#vitamina_b6").val(parseFloat(vitamina_b6).toFixed(3)),a("#vitamina_b12").val(parseFloat(vitamina_b12).toFixed(3)),a("#niacina").val(parseFloat(niacina).toFixed(3)),a("#folico").val(parseFloat(folico).toFixed(3)),a("#pantotenico").val(parseFloat(pantotenico).toFixed(3)),a("#calcio").val(parseFloat(calcio).toFixed(3)),a("#ferro").val(parseFloat(ferro).toFixed(3)),a("#magnesio").val(parseFloat(magnesio).toFixed(3)),a("#potassio").val(parseFloat(potassio).toFixed(3)),a("#selenio").val(parseFloat(selenio).toFixed(3)),a("#fosforo").val(parseFloat(fosforo).toFixed(3)),a("#iodo").val(parseFloat(iodo).toFixed(3)),a("#cobre").val(parseFloat(cobre).toFixed(3)),a("#zinco").val(parseFloat(zinco).toFixed(3)),a("#sodio").val(parseFloat(sodio).toFixed(3)),a("#gordura_total").val(parseFloat(gordura_total).toFixed(3)),a("#colesterol").val(parseFloat(colesterol).toFixed(3)),a("#gordura_saturada").val(parseFloat(gordura_saturada).toFixed(3)),a("#gordura_poliinsaturada").val(parseFloat(gordura_poliinsaturada).toFixed(3)),a("#gordura_monoinsaturada").val(parseFloat(gordura_monoinsaturada).toFixed(3)),a("#valor").val(parseFloat(valor).toFixed(2)),adicionaLinhaTabela(),t(),0==listaTamanho&&(a("#listaVazia").show(),listaVazia=!0),notificacao_sucesso("Item <b>removido</b> com sucesso.")})}),(i=a(".botaoEditar")).off(),i.each(function(e,t){a(t).click(function(){var t=a(a(".idFonte")[e]),i=a(a(".idItem")[e]),o=a(a(".idMedida")[e]),s=a(a(".valorPB")[e]),d=a(a(".valorPL")[e]),l=a(a(".valorFC")[e]);for(var r in posicaoEditar=e,editando=!0,a("#select_fonte_edit").val(t.html()),criaOpcaoItensEdit(t.html()),a("#select_item_edit").val(i.html()),criaOpcaoMedidasEdit(i.html()),a("#select_item_edit").selectpicker("refresh"),a("#select_medida_edit").val(o.html()),a("#p_bruto_edit").val(s.html()),a("#p_liquido_edit").val(d.html()),a("#f_correcao_edit").val(l.html()),itens)null!=itens.hasOwnProperty(r)&&itens[r].id==i.html()&&(energia=parseFloat(energia.toFixed(3))-parseFloat((itens[r].calorias*d.html()/itens[r].medida_base).toFixed(3)),carboidratos=parseFloat(carboidratos.toFixed(3))-parseFloat((itens[r].carboidratos*d.html()/itens[r].medida_base).toFixed(3)),proteinas=parseFloat(proteinas.toFixed(3))-parseFloat((itens[r].proteinas*d.html()/itens[r].medida_base).toFixed(3)),lipidios=parseFloat(lipidios.toFixed(3))-parseFloat((itens[r].lipidios*d.html()/itens[r].medida_base).toFixed(3)),fibras=parseFloat(fibras.toFixed(3))-parseFloat((itens[r].fibras*d.html()/itens[r].medida_base).toFixed(3)),vitamina_a=parseFloat(vitamina_a.toFixed(3))-parseFloat((itens[r].vitamina_a*d.html()/itens[r].medida_base).toFixed(3)),vitamina_c=parseFloat(vitamina_c.toFixed(3))-parseFloat((itens[r].vitamina_c*d.html()/itens[r].medida_base).toFixed(3)),vitamina_d=parseFloat(vitamina_d.toFixed(3))-parseFloat((itens[r].vitamina_d*d.html()/itens[r].medida_base).toFixed(3)),vitamina_e=parseFloat(vitamina_e.toFixed(3))-parseFloat((itens[r].vitamina_e*d.html()/itens[r].medida_base).toFixed(3)),vitamina_b1=parseFloat(vitamina_b1.toFixed(3))-parseFloat((itens[r].vitamina_b1*d.html()/itens[r].medida_base).toFixed(3)),vitamina_b2=parseFloat(vitamina_b2.toFixed(3))-parseFloat((itens[r].vitamina_b2*d.html()/itens[r].medida_base).toFixed(3)),vitamina_b6=parseFloat(vitamina_b6.toFixed(3))-parseFloat((itens[r].vitamina_b6*d.html()/itens[r].medida_base).toFixed(3)),vitamina_b12=parseFloat(vitamina_b12.toFixed(3))-parseFloat((itens[r].vitamina_b12*d.html()/itens[r].medida_base).toFixed(3)),niacina=parseFloat(niacina.toFixed(3))-parseFloat((itens[r].niacina*d.html()/itens[r].medida_base).toFixed(3)),folico=parseFloat(folico.toFixed(3))-parseFloat((itens[r].folico*d.html()/itens[r].medida_base).toFixed(3)),pantotenico=parseFloat(pantotenico.toFixed(3))-parseFloat((itens[r].pantotenico*d.html()/itens[r].medida_base).toFixed(3)),calcio=parseFloat(calcio.toFixed(3))-parseFloat((itens[r].calcio*d.html()/itens[r].medida_base).toFixed(3)),ferro=parseFloat(ferro.toFixed(3))-parseFloat((itens[r].ferro*d.html()/itens[r].medida_base).toFixed(3)),magnesio=parseFloat(magnesio.toFixed(3))-parseFloat((itens[r].magnesio*d.html()/itens[r].medida_base).toFixed(3)),potassio=parseFloat(potassio.toFixed(3))-parseFloat((itens[r].potassio*d.html()/itens[r].medida_base).toFixed(3)),selenio=parseFloat(selenio.toFixed(3))-parseFloat((itens[r].selenio*d.html()/itens[r].medida_base).toFixed(3)),fosforo=parseFloat(fosforo.toFixed(3))-parseFloat((itens[r].fosforo*d.html()/itens[r].medida_base).toFixed(3)),iodo=parseFloat(iodo.toFixed(3))-parseFloat((itens[r].iodo*d.html()/itens[r].medida_base).toFixed(3)),cobre=parseFloat(cobre.toFixed(3))-parseFloat((itens[r].cobre*d.html()/itens[r].medida_base).toFixed(3)),zinco=parseFloat(zinco.toFixed(3))-parseFloat((itens[r].zinco*d.html()/itens[r].medida_base).toFixed(3)),sodio=parseFloat(sodio.toFixed(3))-parseFloat((itens[r].sodio*d.html()/itens[r].medida_base).toFixed(3)),gordura_total=parseFloat(gordura_total.toFixed(3))-parseFloat((itens[r].gordura_total*d.html()/itens[r].medida_base).toFixed(3)),colesterol=parseFloat(colesterol.toFixed(3))-parseFloat((itens[r].colesterol*d.html()/itens[r].medida_base).toFixed(3)),gordura_saturada=parseFloat(gordura_saturada.toFixed(3))-parseFloat((itens[r].gordura_saturada*d.html()/itens[r].medida_base).toFixed(3)),gordura_poliinsaturada=parseFloat(gordura_poliinsaturada.toFixed(3))-parseFloat((itens[r].gordura_poliinsaturada*d.html()/itens[r].medida_base).toFixed(3)),gordura_monoinsaturada=parseFloat(gordura_monoinsaturada.toFixed(3))-parseFloat((itens[r].gordura_monoinsaturada*d.html()/itens[r].medida_base).toFixed(3)),medida_total=parseFloat(medida_total)-parseFloat(d.html()),valor=parseFloat(valor.toFixed(2))-parseFloat((itens[r].valor*d.html()/itens[r].medida_base).toFixed(2)))})})}a(function(){var e=a("#id_form").serialize();a("#confBotaoEnviar").click(function(){window.onbeforeunload=null}),a("#confBotaoEnviarUpdate").click(function(){window.onbeforeunload=null}),a("#btn_cancelar").click(function(){window.onbeforeunload=null}),window.onbeforeunload=function(){return a("#id_form").serialize()===e?null:"Os dados do formulário não foram salvos, deseja permanecer nesta página?"}}),a("#select_item").selectpicker(),a("#select_item_edit").selectpicker(),criaOpcaoItens(0),a("#select_fonte").change(function(){a("#select_item").empty(),a("#select_item").html(criaOpcaoItens(a("#select_fonte option:selected").val())),a("#select_medida").empty(),a("#select_medida").append('<option value="0" option:selected>Selecione uma opção</option>'),a("#p_bruto").prop("disabled",!0),a("#p_liquido").prop("disabled",!0)}),a("#select_fonte_edit").change(function(){a("#select_item_edit").empty(),a("#select_item_edit").html(criaOpcaoItensEdit(a("#select_fonte_edit option:selected").val())),a("#select_medida_edit").empty(),a("#select_medida_edit").append('<option value="0" option:selected>Selecione uma opção</option>'),a("#p_bruto_edit").prop("disabled",!0),a("#p_liquido_edit").prop("disabled",!0)}),a("#nome").change(function(){adicionaLinhaTabela()}),a("#modo_preparo").change(function(){adicionaLinhaTabela()}),a("#select_item").change(function(){if(a("#select_medida").empty(),a("#select_medida").html(criaOpcaoMedidas(a("#select_item option:selected").val())),$idItem=a("#select_item option:selected").val(),$idItem>0)for(var e in medidas_itens)if(null!=medidas_itens.hasOwnProperty(e)&&medidas_itens[e].id_item==$idItem){var t='<option value="'+medidas_itens[e].id+'">'+medidas_itens[e].nome_medida+"</option>";a("#select_medida").append(t)}a("#p_bruto").val(parseFloat(0).toFixed(3)),a("#p_liquido").val(parseFloat(0).toFixed(3)),a("#f_correcao").val(parseFloat(0).toFixed(3)),a("#p_bruto").prop("disabled",!0),a("#p_liquido").prop("disabled",!0)}),a("#select_item_edit").change(function(){if(a("#select_medida_edit").empty(),a("#select_medida_edit").html(criaOpcaoMedidasEdit(a("#select_item_edit option:selected").val())),$idItem=a("#select_item_edit option:selected").val(),$idItem>0)for(var e in medidas_itens)if(null!=medidas_itens.hasOwnProperty(e)&&medidas_itens[e].id_item==$idItem){var t='<option value="'+medidas_itens[e].id+'">'+medidas_itens[e].nome_medida+"</option>";a("#select_medida_edit").append(t)}a("#p_bruto_edit").val(parseFloat(0).toFixed(3)),a("#p_liquido_edit").val(parseFloat(0).toFixed(3)),a("#f_correcao").val(parseFloat(0).toFixed(3)),a("#p_bruto_edit").prop("disabled",!0),a("#p_liquido_edit").prop("disabled",!0)}),a("#select_medida").change(function(){var e=a("#select_medida option:selected");if(a("#f_correcao").val(parseFloat(0).toFixed(3)),1==e.val())a("#p_bruto").prop("disabled",!1),a("#p_liquido").prop("disabled",!1),a("#p_bruto").val(parseFloat(0).toFixed(3)),a("#p_liquido").val(parseFloat(0).toFixed(3)),a("#f_correcao").val(parseFloat(0).toFixed(3));else if(e.val()>1)for(var t in medidas_itens)null!=medidas_itens.hasOwnProperty(t)&&medidas_itens[t].id==e.val()&&(a("#p_bruto").prop("disabled",!1),a("#p_liquido").prop("disabled",!1),a("#p_bruto").val(parseFloat(medidas_itens[t].medida).toFixed(3)),a("#p_liquido").val(parseFloat(medidas_itens[t].medida).toFixed(3)),a("#f_correcao").val(parseFloat(1).toFixed(3)));else a("#p_bruto").prop("disabled",!0),a("#p_liquido").prop("disabled",!0)}),a("#select_medida_edit").change(function(){var e=a("#select_medida_edit option:selected");if(a("#f_correcao_edit").val(parseFloat(0).toFixed(3)),1==e.val())a("#p_bruto_edit").prop("disabled",!1),a("#p_liquido_edit").prop("disabled",!1),a("#p_bruto_edit").val(parseFloat(0).toFixed(3)),a("#p_liquido_edit").val(parseFloat(0).toFixed(3)),a("#f_correcao_edit").val(parseFloat(0).toFixed(3));else if(e.val()>1)for(var t in medidas_itens)null!=medidas_itens.hasOwnProperty(t)&&medidas_itens[t].id==e.val()&&(a("#p_bruto_edit").prop("disabled",!1),a("#p_liquido_edit").prop("disabled",!1),a("#p_bruto_edit").val(parseFloat(medidas_itens[t].medida).toFixed(3)),a("#p_liquido_edit").val(parseFloat(medidas_itens[t].medida).toFixed(3)),a("#f_correcao_edit").val(parseFloat(1).toFixed(3)));else a("#p_bruto_edit").prop("disabled",!0),a("#p_liquido_edit").prop("disabled",!0)}),a("#p_liquido").change(function(){var e=a("#select_medida option:selected");a("#p_liquido").val();if(a("#p_bruto").val()>0&&a("#p_liquido").val()>0&&a("#p_bruto").val()>=a("#p_liquido").val()){var t=a("#p_bruto").val()/a("#p_liquido").val();a("#f_correcao").val(t)}else a("#f_correcao").val(parseFloat(0).toFixed(3));if(e.val()>4)for(var i in medidas_itens)null!=medidas_itens.hasOwnProperty(i)&&medidas_itens[i].id==e.val()&&a("#select_medida").val(medidas_itens[i].unidade_medida)}),a("#p_liquido_edit").change(function(){var e=a("#select_medida_edit option:selected");a("#p_liquido_edit").val();if(a("#p_bruto_edit").val()>0&&a("#p_liquido_edit").val()>0&&a("#p_bruto_edit").val()>=a("#p_liquido_edit").val()){var t=a("#p_bruto_edit").val()/a("#p_liquido_edit").val();a("#f_correcao_edit").val(t)}else a("#f_correcao_edit").val(parseFloat(0).toFixed(3));if(e.val()>4)for(var i in medidas_itens)null!=medidas_itens.hasOwnProperty(i)&&medidas_itens[i].id==e.val()&&a("#select_medida_edit").val(medidas_itens[i].unidade_medida)}),a("#p_bruto").change(function(){var e=a("#select_medida option:selected");if(a("#p_bruto").val()>0&&a("#p_liquido").val()>0&&a("#p_bruto").val()>=a("#p_liquido").val()){var t=a("#p_bruto").val()/a("#p_liquido").val();a("#f_correcao").val(t)}else a("#f_correcao").val(parseFloat(0).toFixed(3));if(e.val()>4)for(var i in medidas_itens)null!=medidas_itens.hasOwnProperty(i)&&medidas_itens[i].id==e.val()&&a("#select_medida").val(medidas_itens[i].unidade_medida)}),a("#p_bruto_edit").change(function(){var e=a("#select_medida_edit option:selected");if(a("#p_bruto_edit").val()>0&&a("#p_liquido_edit").val()>0&&a("#p_bruto_edit").val()>=a("#p_liquido_edit").val()){var t=a("#p_bruto_edit").val()/a("#p_liquido_edit").val();a("#f_correcao_edit").val(t)}else a("#f_correcao_edit").val(parseFloat(0).toFixed(3));if(e.val()>4)for(var i in medidas_itens)null!=medidas_itens.hasOwnProperty(i)&&medidas_itens[i].id==e.val()&&a("#select_medida_edit").val(medidas_itens[i].unidade_medida)}),a("#r_total").change(function(){if(medida_total>0){var e=parseFloat((a("#r_total").val()/medida_total).toFixed(3));a("#f_coccao").val(e)}else a("#f_coccao").val(parseFloat(0).toFixed(3))}),t(),a("#botaoAdicionar").click(function(){(function(){var e=!1,t=a("#select_fonte option:selected"),i=a("#select_item option:selected"),o=a("#select_medida option:selected"),s=a("#p_bruto"),d=a("#p_liquido"),l=a("#f_correcao");if(1==contarLetra(s.val(),",")){var r=s.val();s.val(r.replace(/,/g,"."))}if(s.val(parseFloat(s.val()).toFixed(3)),1==contarLetra(d.val(),",")){var r=d.val();d.val(r.replace(/,/g,"."))}if(d.val(parseFloat(d.val()).toFixed(3)),1==contarLetra(l.val(),",")){var r=l.val();s.val(r.replace(/,/g,"."))}l.val(parseFloat(l.val()).toFixed(3)),t.val()<0?(e=!0,notificacao_alerta("Selecione uma <b>Fonte</b>.")):i.val()<=0?(e=!0,notificacao_alerta("Selecione um <b>Item</b>.")):o.val()<=0?(e=!0,notificacao_alerta("Selecione uma <b>Medida</b>.")):a.isNumeric(s.val())?s.val()<=0?(e=!0,notificacao_alerta("Insira um valor maior que 0 (zero) em <b>Per Capta Bruto</b>.")):a.isNumeric(d.val())?d.val()<=0?(e=!0,notificacao_alerta("Insira um valor maior que 0 (zero) em <b>Per Capta Líquido</b>.")):a('var[class="idItem"]').each(function(t,o){a(o).html()==i.val()&&(e=!0,notificacao_alerta("<b>Itens iguais</b> estão sendo adicionados."))}):(e=!0,notificacao_alerta("Insira um número em <b>Peso Líquido</b>.")):(e=!0,notificacao_alerta("Insira um número em <b>Peso Bruto</b>."));return e})()||(1==listaVazia&&a("#listaVazia").hide(),function(){var e=a("#select_item option:selected"),t=a("#select_fonte option:selected"),i=a("#select_medida option:selected"),o=a("#p_bruto"),s=a("#p_liquido"),d=a("#f_correcao");if(i.val()>4)for(var l in medidas_itens)null!=medidas_itens.hasOwnProperty(l)&&medidas_itens[l].id==i.val()&&(a("#select_medida").val(medidas_itens[l].unidade_medida),i=a("#select_medida option:selected"));var r='<div class="listaItem"><li class="panel label-azul"><div class="row"><var class="idItem" style="display: none">'+e.val()+'</var><var class="idFonte" style="display: none">'+t.val()+'</var><var class="idMedida" style="display: none">1</var><var class="valorPB" style="display: none">'+o.val()+'</var><var class="valorPL" style="display: none">'+s.val()+'</var><var class="valorFC" style="display: none">'+d.val()+'</var><div class="col-md-4 wrapper item" style="margin-top: 5px">'+e.text()+'</div><div class="col-md-2 wrapper pb" style="margin-top: 5px">'+parseFloat(o.val()).toFixed(3)+" "+i.text()+'</div><div class="col-md-2 wrapper pl" style="margin-top: 5px">'+parseFloat(s.val()).toFixed(3)+" "+i.text()+'</div><div class="col-md-2 wrapper fc" style="margin-top: 5px">'+parseFloat(d.val()).toFixed(3)+'</div><div class="col-md-1 text-center"><a class="btn btn-default botaoEditar" data-toggle="modal" data-target="#editar_item"><i class="fa fa-edit"></i></a></div><div class="col-md-1 text-center"><button class="btn btn-danger botaoRemover data-toggle="tooltip" data-placement="top" title="Excluir"><i class="fa fa-trash"></i></button></div></div></li></div>';for(var l in itens)null!=itens.hasOwnProperty(l)&&itens[l].id==e.val()&&(energia=parseFloat(energia.toFixed(3))+parseFloat((itens[l].calorias*s.val()/itens[l].medida_base).toFixed(3)),carboidratos=parseFloat(carboidratos.toFixed(3))+parseFloat((itens[l].carboidratos*s.val()/itens[l].medida_base).toFixed(3)),proteinas=parseFloat(proteinas.toFixed(3))+parseFloat((itens[l].proteinas*s.val()/itens[l].medida_base).toFixed(3)),lipidios=parseFloat(lipidios.toFixed(3))+parseFloat((itens[l].lipidios*s.val()/itens[l].medida_base).toFixed(3)),fibras=parseFloat(fibras.toFixed(3))+parseFloat((itens[l].fibras*s.val()/itens[l].medida_base).toFixed(3)),vitamina_a=parseFloat(vitamina_a.toFixed(3))+parseFloat((itens[l].vitamina_a*s.val()/itens[l].medida_base).toFixed(3)),vitamina_c=parseFloat(vitamina_c.toFixed(3))+parseFloat((itens[l].vitamina_c*s.val()/itens[l].medida_base).toFixed(3)),vitamina_d=parseFloat(vitamina_d.toFixed(3))+parseFloat((itens[l].vitamina_d*s.val()/itens[l].medida_base).toFixed(3)),vitamina_e=parseFloat(vitamina_e.toFixed(3))+parseFloat((itens[l].vitamina_e*s.val()/itens[l].medida_base).toFixed(3)),vitamina_b1=parseFloat(vitamina_b1.toFixed(3))+parseFloat((itens[l].vitamina_b1*s.val()/itens[l].medida_base).toFixed(3)),vitamina_b2=parseFloat(vitamina_b2.toFixed(3))+parseFloat((itens[l].vitamina_b2*s.val()/itens[l].medida_base).toFixed(3)),vitamina_b6=parseFloat(vitamina_b6.toFixed(3))+parseFloat((itens[l].vitamina_b6*s.val()/itens[l].medida_base).toFixed(3)),vitamina_b12=parseFloat(vitamina_b12.toFixed(3))+parseFloat((itens[l].vitamina_b12*s.val()/itens[l].medida_base).toFixed(3)),niacina=parseFloat(niacina.toFixed(3))+parseFloat((itens[l].niacina*s.val()/itens[l].medida_base).toFixed(3)),folico=parseFloat(folico.toFixed(3))+parseFloat((itens[l].folico*s.val()/itens[l].medida_base).toFixed(3)),pantotenico=parseFloat(pantotenico.toFixed(3))+parseFloat((itens[l].pantotenico*s.val()/itens[l].medida_base).toFixed(3)),calcio=parseFloat(calcio.toFixed(3))+parseFloat((itens[l].calcio*s.val()/itens[l].medida_base).toFixed(3)),ferro=parseFloat(ferro.toFixed(3))+parseFloat((itens[l].ferro*s.val()/itens[l].medida_base).toFixed(3)),magnesio=parseFloat(magnesio.toFixed(3))+parseFloat((itens[l].magnesio*s.val()/itens[l].medida_base).toFixed(3)),potassio=parseFloat(potassio.toFixed(3))+parseFloat((itens[l].potassio*s.val()/itens[l].medida_base).toFixed(3)),selenio=parseFloat(selenio.toFixed(3))+parseFloat((itens[l].selenio*s.val()/itens[l].medida_base).toFixed(3)),fosforo=parseFloat(fosforo.toFixed(3))+parseFloat((itens[l].fosforo*s.val()/itens[l].medida_base).toFixed(3)),iodo=parseFloat(iodo.toFixed(3))+parseFloat((itens[l].iodo*s.val()/itens[l].medida_base).toFixed(3)),cobre=parseFloat(cobre.toFixed(3))+parseFloat((itens[l].cobre*s.val()/itens[l].medida_base).toFixed(3)),zinco=parseFloat(zinco.toFixed(3))+parseFloat((itens[l].zinco*s.val()/itens[l].medida_base).toFixed(3)),sodio=parseFloat(sodio.toFixed(3))+parseFloat((itens[l].sodio*s.val()/itens[l].medida_base).toFixed(3)),gordura_total=parseFloat(gordura_total.toFixed(3))+parseFloat((itens[l].gordura_total*s.val()/itens[l].medida_base).toFixed(3)),colesterol=parseFloat(colesterol.toFixed(3))+parseFloat((itens[l].colesterol*s.val()/itens[l].medida_base).toFixed(3)),gordura_saturada=parseFloat(gordura_saturada.toFixed(3))+parseFloat((itens[l].gordura_saturada*s.val()/itens[l].medida_base).toFixed(3)),gordura_poliinsaturada=parseFloat(gordura_poliinsaturada.toFixed(3))+parseFloat((itens[l].gordura_poliinsaturada*s.val()/itens[l].medida_base).toFixed(3)),gordura_monoinsaturada=parseFloat(gordura_monoinsaturada.toFixed(3))+parseFloat((itens[l].gordura_monoinsaturada*s.val()/itens[l].medida_base).toFixed(3)),medida_total=parseFloat(medida_total)+parseFloat(s.val()),valor=parseFloat(valor.toFixed(2))+parseFloat((itens[l].valor*s.val()/itens[l].medida_base).toFixed(2)));a("#calorias").val(energia),a("#carboidratos").val(carboidratos),a("#proteinas").val(proteinas),a("#lipidios").val(lipidios),a("#fibras").val(fibras),a("#vitamina_a").val(vitamina_a),a("#vitamina_c").val(vitamina_c),a("#vitamina_d").val(vitamina_d),a("#vitamina_e").val(vitamina_e),a("#vitamina_b1").val(vitamina_b1),a("#vitamina_b2").val(vitamina_b2),a("#vitamina_b6").val(vitamina_b6),a("#vitamina_b12").val(vitamina_b12),a("#niacina").val(niacina),a("#folico").val(folico),a("#pantotenico").val(pantotenico),a("#calcio").val(calcio),a("#ferro").val(ferro),a("#magnesio").val(magnesio),a("#potassio").val(potassio),a("#selenio").val(selenio),a("#fosforo").val(fosforo),a("#iodo").val(iodo),a("#cobre").val(cobre),a("#zinco").val(zinco),a("#sodio").val(sodio),a("#gordura_total").val(gordura_total),a("#colesterol").val(colesterol),a("#gordura_saturada").val(gordura_saturada),a("#gordura_poliinsaturada").val(gordura_poliinsaturada),a("#gordura_monoinsaturada").val(gordura_monoinsaturada),a("#valor").val(parseFloat(valor).toFixed(2)),a("#listaItens").append(r),adicionaLinhaTabela()}(),listaTamanho++,listaVazia=!1,notificacao_sucesso("Item <b>adicionado</b> com sucesso."),e(),t())}),a("#concluir_edicao").click(function(){(function(){var e=!1,t=a("#select_fonte_edit option:selected"),i=a("#select_item_edit option:selected"),o=a("#select_medida_edit option:selected"),s=a("#p_bruto_edit"),d=a("#p_liquido_edit"),l=a("#f_correcao_edit");if(1==contarLetra(s.val(),",")){var r=s.val();s.val(r.replace(/,/g,"."))}if(s.val(parseFloat(s.val()).toFixed(3)),1==contarLetra(d.val(),",")){var r=d.val();d.val(r.replace(/,/g,"."))}if(d.val(parseFloat(d.val()).toFixed(3)),1==contarLetra(l.val(),",")){var r=l.val();s.val(r.replace(/,/g,"."))}l.val(parseFloat(l.val()).toFixed(3)),t.val()<0?(e=!0,notificacao_alerta("Selecine uma <b>Fonte</b>.")):i.val()<=0?(e=!0,notificacao_alerta("Selecine um <b>Item</b>.")):o.val()<=0?(e=!0,notificacao_alerta("Selecine uma <b>Medida</b>.")):a.isNumeric(s.val())?s.val()<0?(e=!0,notificacao_alerta("Insira um valor maior ou igual a 0 (zero) em <b>Per Capta Bruto</b>.")):a.isNumeric(d.val())?d.val()<=0?(e=!0,notificacao_alerta("Insira um valor maior que 0 (zero) em <b>Per Capta Líquido</b>.")):a('var[class="idItem"]').each(function(t,o){a(o).html()==i.val()&&t!=posicaoEditar&&(e=!0,notificacao_alerta("<b>Itens iguais</b> estão sendo adicionados."))}):(e=!0,notificacao_alerta("Insira um número em <b>Peso Líquido</b>.")):(e=!0,notificacao_alerta("Insira um número em <b>Peso Bruto</b>."));return e})()||(!function(){var e=a("#select_item_edit option:selected"),t=a("#select_tipo_edit option:selected"),i=a("#select_medida_edit option:selected"),o=a("#p_bruto_edit"),s=a("#p_liquido_edit"),d=a("#f_correcao_edit");1==listaVazia&&a("#listaVazia").show();a(a(".idTipo")[posicaoEditar]).html(t.val()),a(a(".idItem")[posicaoEditar]).html(e.val()),a(a(".idMedida")[posicaoEditar]).html(i.val()),a(a(".valorPL")[posicaoEditar]).html(s.val()),a(a(".valorPB")[posicaoEditar]).html(o.val()),a(a(".valorFC")[posicaoEditar]).html(parseFloat(d.val()).toFixed(3)),a(a(".tipo")[posicaoEditar]).html(t.text()),a(a(".item")[posicaoEditar]).html(e.text()),o.val()>0?(a(a(".pb")[posicaoEditar]).html(o.val()+" g"),a(a(".fc")[posicaoEditar]).html(parseFloat(d.val()).toFixed(3))):(a(a(".pb")[posicaoEditar]).html("N/A"),a(a(".fc")[posicaoEditar]).html("N/A"));for(var l in a(a(".pl")[posicaoEditar]).html(s.val()+" g"),itens)null!=itens.hasOwnProperty(l)&&itens[l].id==e.val()&&(energia=parseFloat(energia.toFixed(3))+parseFloat((itens[l].calorias*s.val()/itens[l].medida_base).toFixed(3)),carboidratos=parseFloat(carboidratos.toFixed(3))+parseFloat((itens[l].carboidratos*s.val()/itens[l].medida_base).toFixed(3)),proteinas=parseFloat(proteinas.toFixed(3))+parseFloat((itens[l].proteinas*s.val()/itens[l].medida_base).toFixed(3)),lipidios=parseFloat(lipidios.toFixed(3))+parseFloat((itens[l].lipidios*s.val()/itens[l].medida_base).toFixed(3)),fibras=parseFloat(fibras.toFixed(3))+parseFloat((itens[l].fibras*s.val()/itens[l].medida_base).toFixed(3)),vitamina_a=parseFloat(vitamina_a.toFixed(3))+parseFloat((itens[l].vitamina_a*s.val()/itens[l].medida_base).toFixed(3)),vitamina_c=parseFloat(vitamina_c.toFixed(3))+parseFloat((itens[l].vitamina_c*s.val()/itens[l].medida_base).toFixed(3)),vitamina_d=parseFloat(vitamina_d.toFixed(3))+parseFloat((itens[l].vitamina_d*s.val()/itens[l].medida_base).toFixed(3)),vitamina_e=parseFloat(vitamina_e.toFixed(3))+parseFloat((itens[l].vitamina_e*s.val()/itens[l].medida_base).toFixed(3)),vitamina_b1=parseFloat(vitamina_b1.toFixed(3))+parseFloat((itens[l].vitamina_b1*s.val()/itens[l].medida_base).toFixed(3)),vitamina_b2=parseFloat(vitamina_b2.toFixed(3))+parseFloat((itens[l].vitamina_b2*s.val()/itens[l].medida_base).toFixed(3)),vitamina_b6=parseFloat(vitamina_b6.toFixed(3))+parseFloat((itens[l].vitamina_b6*s.val()/itens[l].medida_base).toFixed(3)),vitamina_b12=parseFloat(vitamina_b12.toFixed(3))+parseFloat((itens[l].vitamina_b12*s.val()/itens[l].medida_base).toFixed(3)),niacina=parseFloat(niacina.toFixed(3))+parseFloat((itens[l].niacina*s.val()/itens[l].medida_base).toFixed(3)),folico=parseFloat(folico.toFixed(3))+parseFloat((itens[l].folico*s.val()/itens[l].medida_base).toFixed(3)),pantotenico=parseFloat(pantotenico.toFixed(3))+parseFloat((itens[l].pantotenico*s.val()/itens[l].medida_base).toFixed(3)),calcio=parseFloat(calcio.toFixed(3))+parseFloat((itens[l].calcio*s.val()/itens[l].medida_base).toFixed(3)),ferro=parseFloat(ferro.toFixed(3))+parseFloat((itens[l].ferro*s.val()/itens[l].medida_base).toFixed(3)),magnesio=parseFloat(magnesio.toFixed(3))+parseFloat((itens[l].magnesio*s.val()/itens[l].medida_base).toFixed(3)),potassio=parseFloat(potassio.toFixed(3))+parseFloat((itens[l].potassio*s.val()/itens[l].medida_base).toFixed(3)),selenio=parseFloat(selenio.toFixed(3))+parseFloat((itens[l].selenio*s.val()/itens[l].medida_base).toFixed(3)),fosforo=parseFloat(fosforo.toFixed(3))+parseFloat((itens[l].fosforo*s.val()/itens[l].medida_base).toFixed(3)),iodo=parseFloat(iodo.toFixed(3))+parseFloat((itens[l].iodo*s.val()/itens[l].medida_base).toFixed(3)),cobre=parseFloat(cobre.toFixed(3))+parseFloat((itens[l].cobre*s.val()/itens[l].medida_base).toFixed(3)),zinco=parseFloat(zinco.toFixed(3))+parseFloat((itens[l].zinco*s.val()/itens[l].medida_base).toFixed(3)),sodio=parseFloat(sodio.toFixed(3))+parseFloat((itens[l].sodio*s.val()/itens[l].medida_base).toFixed(3)),gordura_total=parseFloat(gordura_total.toFixed(3))+parseFloat((itens[l].gordura_total*s.val()/itens[l].medida_base).toFixed(3)),colesterol=parseFloat(colesterol.toFixed(3))+parseFloat((itens[l].colesterol*s.val()/itens[l].medida_base).toFixed(3)),gordura_saturada=parseFloat(gordura_saturada.toFixed(3))+parseFloat((itens[l].gordura_saturada*s.val()/itens[l].medida_base).toFixed(3)),gordura_poliinsaturada=parseFloat(gordura_poliinsaturada.toFixed(3))+parseFloat((itens[l].gordura_poliinsaturada*s.val()/itens[l].medida_base).toFixed(3)),gordura_monoinsaturada=parseFloat(gordura_monoinsaturada.toFixed(3))+parseFloat((itens[l].gordura_monoinsaturada*s.val()/itens[l].medida_base).toFixed(3)),medida_total=parseFloat(medida_total)+parseFloat(s.val()),valor=parseFloat(valor.toFixed(2))+parseFloat((itens[l].valor*s.val()/itens[l].medida_base).toFixed(2)));a("#calorias").val(parseFloat(energia).toFixed(3)),a("#carboidratos").val(parseFloat(carboidratos).toFixed(3)),a("#proteinas").val(parseFloat(proteinas).toFixed(3)),a("#lipidios").val(parseFloat(lipidios).toFixed(3)),a("#fibras").val(parseFloat(fibras).toFixed(3)),a("#vitamina_a").val(parseFloat(vitamina_a).toFixed(3)),a("#vitamina_c").val(parseFloat(vitamina_c).toFixed(3)),a("#vitamina_d").val(parseFloat(vitamina_d).toFixed(3)),a("#vitamina_e").val(parseFloat(vitamina_e).toFixed(3)),a("#vitamina_b1").val(parseFloat(vitamina_b1).toFixed(3)),a("#vitamina_b2").val(parseFloat(vitamina_b2).toFixed(3)),a("#vitamina_b6").val(parseFloat(vitamina_b6).toFixed(3)),a("#vitamina_b12").val(parseFloat(vitamina_b12).toFixed(3)),a("#niacina").val(parseFloat(niacina).toFixed(3)),a("#folico").val(parseFloat(folico).toFixed(3)),a("#pantotenico").val(parseFloat(pantotenico).toFixed(3)),a("#calcio").val(parseFloat(calcio).toFixed(3)),a("#ferro").val(parseFloat(ferro).toFixed(3)),a("#magnesio").val(parseFloat(magnesio).toFixed(3)),a("#potassio").val(parseFloat(potassio).toFixed(3)),a("#selenio").val(parseFloat(selenio).toFixed(3)),a("#fosforo").val(parseFloat(fosforo).toFixed(3)),a("#iodo").val(parseFloat(iodo).toFixed(3)),a("#cobre").val(parseFloat(cobre).toFixed(3)),a("#zinco").val(parseFloat(zinco).toFixed(3)),a("#sodio").val(parseFloat(sodio).toFixed(3)),a("#gordura_total").val(parseFloat(gordura_total).toFixed(3)),a("#colesterol").val(parseFloat(colesterol).toFixed(3)),a("#gordura_saturada").val(parseFloat(gordura_saturada).toFixed(3)),a("#gordura_poliinsaturada").val(parseFloat(gordura_poliinsaturada).toFixed(3)),a("#gordura_monoinsaturada").val(parseFloat(gordura_monoinsaturada).toFixed(3)),a("#valor").val(parseFloat(valor).toFixed(2)),adicionaLinhaTabela()}(),editando=!1,notificacao_sucesso("Item <b>editado</b> com sucesso."),a("#editar_item").modal("hide"),t())}),a("#confBotaoEnviar").click(function(){var e,t,i,o,s,d;validaEnviarFormulario()||validaListaVazia()||(a(this).addClass("disabled"),a(this).text("Enviando..."),e=a("#select_tipo_preparacao option:selected").val(),t=a("#nome").val(),i=a("#descricao").val(),o=a("#modo_preparo").val(),s=a("#r_total").val(),d=[],a('var[class="idFonte"]').each(function(l,r){d.hasOwnProperty(l)||(d[l]={id_tipo_preparacao:e,nome:t,descricao:i,modo_preparo:o,medida_total:s}),d[l][a(this).attr("class")]=a(this).html()}),a('var[class="idItem"]').each(function(l,r){d.hasOwnProperty(l)||(d[l]={id_tipo_preparacao:e,nome:t,descricao:i,modo_preparo:o,medida_total:s}),d[l][a(this).attr("class")]=a(this).html()}),a('var[class="valorPB"]').each(function(l,r){d.hasOwnProperty(l)||(d[l]={id_tipo_preparacao:e,nome:t,descricao:i,modo_preparo:o,medida_total:s}),d[l][a(this).attr("class")]=a(this).html()}),a('var[class="valorPL"]').each(function(l,r){d.hasOwnProperty(l)||(d[l]={id_tipo_preparacao:e,nome:t,descricao:i,modo_preparo:o,medida_total:s}),d[l][a(this).attr("class")]=a(this).html()}),a('var[class="idMedida"]').each(function(l,r){d.hasOwnProperty(l)||(d[l]={id_tipo_preparacao:e,nome:t,descricao:i,modo_preparo:o,medida_total:s}),d[l][a(this).attr("class")]=a(this).html()}),a.ajaxSetup({headers:{"X-CSRF-TOKEN":a('meta[name="csrf-token"]').attr("content")}}),a.ajax({url:"/preparation/save",type:"post",dataType:"text",data:{testdata:JSON.stringify(d)},success:function(a,e){mostraDialogo4(a)},error:function(a,e,t){alert("Erro")}}))})});
