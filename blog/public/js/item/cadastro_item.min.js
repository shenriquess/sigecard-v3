var listaVazia=!0,listaTamanho=0;function validaListaVazia(){var a=!1;return 0==listaTamanho&&(notificacao_alerta("A lista de Ingredientes está <b>Vazia</b>."),a=!0),a}function validaEnviarFormulario(){var a=!1,i=$("#nome"),o=$("#id_tipo_item option:selected"),l=$("#id_fonte option:selected"),r=($("#unidade_medida option:selected"),$("#medida_base")),n=$("#calorias"),t=$("#carboidratos"),e=$("#proteinas"),c=$("#lipidios"),s=$("#fibras"),d=$("#vitamina_a"),v=$("#vitamina_c"),m=$("#vitamina_d"),u=$("#vitamina_e"),_=$("#vitamina_b1"),b=$("#vitamina_b2"),f=$("#vitamina_b6"),p=$("#vitamina_b12"),N=$("#niacina"),g=$("#folico"),V=$("#pantotenico"),I=$("#calcio"),h=$("#ferro"),z=$("#magnesio"),w=$("#potassio"),y=$("#selenio"),F=$("#fosforo"),S=$("#iodo"),x=$("#cobre"),E=$("#zinco"),k=$("#sodio"),C=$("#gordura_total"),B=$("#colesterol"),M=$("#gordura_saturada"),P=$("#gordura_poliinsaturada"),T=$("#gordura_monoinsaturada"),q=$("#valor");return""==i.val()?(a=!0,notificacao_alerta("Digite um <b>Nome</b>.")):o.val()<=0?(a=!0,notificacao_alerta("Selecine um <b>Grupo de Alimentos</b>.")):l.val()<=0?(a=!0,notificacao_alerta("Selecine uma <b>Fonte de Informações Nutricionais</b>.")):q.val()<0?(a=!0,notificacao_alerta("Insira um valor válido em <b>Preço</b>.")):!$.isNumeric(r.val())||r.val()<=0?(a=!0,notificacao_alerta("Insira um valor válido em <b>Medida Base</b>.")):!$.isNumeric(n.val())||n.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Calorias</b>.")):!$.isNumeric(t.val())||t.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Carboidratos</b>.")):!$.isNumeric(e.val())||e.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Proteínas</b>.")):!$.isNumeric(c.val())||c.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Lipídios</b>.")):!$.isNumeric(s.val())||s.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Fibras</b>.")):!$.isNumeric(d.val())||d.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Vitamina A</b>.")):!$.isNumeric(v.val())||v.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Vitamina C</b>.")):!$.isNumeric(m.val())||m.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Vitamina D</b>.")):!$.isNumeric(u.val())||u.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Vitamina E</b>.")):!$.isNumeric(_.val())||_.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Vitamina B1</b>.")):!$.isNumeric(b.val())||b.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Vitamina B2</b>.")):!$.isNumeric(f.val())||f.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Vitamina B6</b>.")):!$.isNumeric(p.val())||p.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Vitamina B12</b>.")):!$.isNumeric(N.val())||N.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Niacia</b>.")):!$.isNumeric(g.val())||g.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Ácido Fólico</b>.")):!$.isNumeric(V.val())||V.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Ácido Pantotênico</b>.")):!$.isNumeric(I.val())||I.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Cálcio</b>.")):!$.isNumeric(h.val())||h.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Ferro</b>.")):!$.isNumeric(z.val())||z.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Magnésio</b>.")):!$.isNumeric(w.val())||w.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Potássio</b>.")):!$.isNumeric(y.val())||y.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Selênio</b>.")):!$.isNumeric(F.val())||F.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Fósforo</b>.")):!$.isNumeric(S.val())||S.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Iodo</b>.")):!$.isNumeric(x.val())||x.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Cobre</b>.")):!$.isNumeric(E.val())||E.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Zinco</b>.")):!$.isNumeric(k.val())||k.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Sódio</b>.")):!$.isNumeric(C.val())||C.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Gordura Total</b>.")):!$.isNumeric(B.val())||B.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Colesterol</b>.")):!$.isNumeric(M.val())||M.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Gordura Saturada</b>.")):!$.isNumeric(P.val())||P.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Gordura Poliinsaturada</b>.")):!$.isNumeric(T.val())||T.val()<0?(a=!0,notificacao_alerta("Insira um valor válido no Valor Nutricional <b>Gordura Monoinsaturada</b>.")):a=!1,a}$(document).ready(function(a){function i(){a("#nome_medida").val(""),a("#quantidade_c").val("0.000")}function o(){var i;(i=a(".botaoRemover")).off(),i.each(function(i,l){a(l).click(function(){a(a(".nome")[i]),a(a(".quantidade")[i]),a(a(".listaItem")[i]).remove(),0==--listaTamanho&&(a("#listaVazia").show(),listaVazia=!0),o(),0==listaTamanho&&(a("#listaVazia").show(),listaVazia=!0),notificacao_sucesso("Item <b>removido</b> com sucesso."),a("#nicescroll").getNiceScroll().resize()})})}a(function(){var i=a("#id_form").serialize();a("#confBotaoEnviar").click(function(){window.onbeforeunload=null}),a("#confBotaoEnviarUpdate").click(function(){window.onbeforeunload=null}),a("#btn_cancelar").click(function(){window.onbeforeunload=null}),window.onbeforeunload=function(){return a("#id_form").serialize()===i?null:"Os dados do formulário não foram salvos, deseja permanecer nesta página?"}}),a("#nicescroll").niceScroll(),o(),a("#botaoAdicionar").click(function(){var l,r,n;(function(){var i=!1,o=(a("#select_medida_caseira option:selected"),a("#nome_medida")),l=a("#quantidade_c");if(1==contarLetra(l.val(),",")){var r=l.val();l.val(r.replace(/,/g,"."))}l.val(parseFloat(l.val()).toFixed(3)),a.isNumeric(l.val())?l.val()<=0?(i=!0,notificacao_alerta("Insira um valor maior que 0 (zero) em <b>Qauntidade</b>.")):""==o.val()?(i=!0,notificacao_alerta("Insira um nome em <b>Nome da Medida</b>.")):a('var[class="nome"]').each(function(l,r){a(r).html()==o.val()&&(i=!0,notificacao_alerta("<b>Medidas com nomes iguais</b> estão sendo adicionadas."))}):(i=!0,notificacao_alerta("Insira um número em <b>Quantidade</b>."));return i})()||(1==listaVazia&&a("#listaVazia").hide(),l=a("#nome_medida"),r=a("#quantidade_c"),n='<div class="listaItem"><li class="panel label-azul"><div class="row"><var class="idMedida" style="display: none">1</var><var class="nome_medida" style="display: none">'+l.val()+'</var><var class="quantidade" style="display: none">'+r.val()+'</var><div class="col-md-6 wrapper nome_medida" style="margin-top: 5px">'+l.val()+'</div><div class="col-md-4 wrapper valor_medida" style="margin-top: 5px">'+r.val()+' g</div><div class="col-md-2 text-center"><button class="btn btn-danger botaoRemover data-toggle="tooltip" data-placement="top" title="Excluir"><i class="fa fa-trash"></i></button></div></div></li></div>',a("#listaItens").append(n),a("#nicescroll").getNiceScroll().resize(),listaTamanho++,listaVazia=!1,notificacao_sucesso("Item <b>adicionado</b> com sucesso."),i(),o())}),a("#botaoCalcDensidade").click(function(){if($selectItem=a("#select_item option:selected"),$mililitros=a("#valor_ml"),$gramas=0,$densidade=0,$mililitros.val<=0||""==$mililitros.val())notificacao_alerta("Digite um valor válido em <b>Medida em <i>ml</i></b>.");else if($selectItem.val()<=0)notificacao_alerta("Selecione um <b>Item</b>.");else{for(var i in densidades)densidades[i].id==$selectItem.val()&&($densidade=densidades[i].valor);$gramas=parseFloat(($mililitros.val()*$densidade).toFixed(3)),a("#valor_g").val($gramas)}}),a("#confBotaoEnviar").click(function(){var i,o,l,r,n,t,e,c,s,d,v,m,u,_,b,f,$,p,N,g,V,I,h,z,w,y,F,S,x,E,k,C,B,M,P,T,q;validaEnviarFormulario()||(a(this).addClass("disabled"),a(this).text("Enviando..."),i=a("#nome").val(),o=a("#id_tipo_item option:selected").val(),l=a("#id_fonte option:selected").val(),r=a("#medida_base").val(),n=a("#calorias").val(),t=a("#carboidratos").val(),e=a("#proteinas").val(),c=a("#lipidios").val(),s=a("#fibras").val(),d=a("#vitamina_a").val(),v=a("#vitamina_c").val(),m=a("#vitamina_d").val(),u=a("#vitamina_e").val(),_=a("#vitamina_b1").val(),b=a("#vitamina_b2").val(),f=a("#vitamina_b6").val(),$=a("#vitamina_b12").val(),p=a("#niacina").val(),N=a("#folico").val(),g=a("#pantotenico").val(),V=a("#calcio").val(),I=a("#ferro").val(),h=a("#magnesio").val(),z=a("#potassio").val(),w=a("#selenio").val(),y=a("#fosforo").val(),F=a("#iodo").val(),S=a("#cobre").val(),x=a("#zinco").val(),E=a("#sodio").val(),k=a("#gordura_total").val(),C=a("#colesterol").val(),B=a("#gordura_saturada").val(),M=a("#gordura_poliinsaturada").val(),P=a("#gordura_monoinsaturada").val(),T=a("#valor").val(),q=[],a('var[class="idMedida"]').each(function(O,G){q.hasOwnProperty(O)||(q[O]={nome:i,id_tipo_item:o,id_fonte:l,id_unidade_medida:1,medida_base:r,calorias:n,carboidratos:t,proteinas:e,lipidios:c,fibras:s,vitamina_a:d,vitamina_c:v,vitamina_d:m,vitamina_e:u,vitamina_b1:_,vitamina_b2:b,vitamina_b6:f,vitamina_b12:$,niacina:p,folico:N,pantotenico:g,calcio:V,ferro:I,magnesio:h,potassio:z,selenio:w,fosforo:y,iodo:F,cobre:S,zinco:x,sodio:E,gordura_total:k,colesterol:C,gordura_saturada:B,gordura_poliinsaturada:M,gordura_monoinsaturada:P,valor:T}),q[O][a(this).attr("class")]=a(this).html()}),a('var[class="nome_medida"]').each(function(O,G){q.hasOwnProperty(O)||(q[O]={nome:i,id_tipo_item:o,id_fonte:l,id_unidade_medida:1,medida_base:r,calorias:n,carboidratos:t,proteinas:e,lipidios:c,fibras:s,vitamina_a:d,vitamina_c:v,vitamina_d:m,vitamina_e:u,vitamina_b1:_,vitamina_b2:b,vitamina_b6:f,vitamina_b12:$,niacina:p,folico:N,pantotenico:g,calcio:V,ferro:I,magnesio:h,potassio:z,selenio:w,fosforo:y,iodo:F,cobre:S,zinco:x,sodio:E,gordura_total:k,colesterol:C,gordura_saturada:B,gordura_poliinsaturada:M,gordura_monoinsaturada:P,valor:T}),q[O][a(this).attr("class")]=a(this).html()}),a('var[class="quantidade"]').each(function(O,G){q.hasOwnProperty(O)||(q[O]={nome:i,id_tipo_item:o,id_fonte:l,id_unidade_medida:1,medida_base:r,calorias:n,carboidratos:t,proteinas:e,lipidios:c,fibras:s,vitamina_a:d,vitamina_c:v,vitamina_d:m,vitamina_e:u,vitamina_b1:_,vitamina_b2:b,vitamina_b6:f,vitamina_b12:$,niacina:p,folico:N,pantotenico:g,calcio:V,ferro:I,magnesio:h,potassio:z,selenio:w,fosforo:y,iodo:F,cobre:S,zinco:x,sodio:E,gordura_total:k,colesterol:C,gordura_saturada:B,gordura_poliinsaturada:M,gordura_monoinsaturada:P,valor:T}),q[O][a(this).attr("class")]=a(this).html()}),0===Object.keys(q).length&&(q[0]={nome:i,id_tipo_item:o,id_fonte:l,id_unidade_medida:1,medida_base:r,calorias:n,carboidratos:t,proteinas:e,lipidios:c,fibras:s,vitamina_a:d,vitamina_c:v,vitamina_d:m,vitamina_e:u,vitamina_b1:_,vitamina_b2:b,vitamina_b6:f,vitamina_b12:$,niacina:p,folico:N,pantotenico:g,calcio:V,ferro:I,magnesio:h,potassio:z,selenio:w,fosforo:y,iodo:F,cobre:S,zinco:x,sodio:E,gordura_total:k,colesterol:C,gordura_saturada:B,gordura_poliinsaturada:M,gordura_monoinsaturada:P,valor:T}),a.ajaxSetup({headers:{"X-CSRF-TOKEN":a('meta[name="csrf-token"]').attr("content")}}),a.ajax({url:"/item/save",type:"post",dataType:"text",data:{testdata:JSON.stringify(q)},success:function(a,i){location.reload()},error:function(a,i,o){alert("Erro")}}))})});
